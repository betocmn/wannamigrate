{% load i18n %}
{% load string_extras %}

{% for question in questions %}
    <div class="question">
        <div class="tags">
            <ul class="tags-list">
                {% for topic in question.related_topics.all %}
                    <li class="tag"><a href="{% url "qa:view_topic" topic.slug %}" class="tag-link">{% trans topic.name %}</a></li>
                {% endfor %}
            </ul>
        </div>
        <div class="data-question">
            <a href="{% url "qa:view_question" question.slug %}">
                <h3 class="title-question">{{ question.title }}</h3>
                <p class="answer">
                    {% with question.answers.all|first as first_answer %}
                        {% if first_answer.body %}
                            {{ first_answer.body|striptags|truncate_smart:250 }}
                        {% else %}
                            {{ question.body|striptags|truncate_smart:250 }}
                        {% endif %}
                    {% endwith %}
                </p>
            </a>
        </div>
        <div class="data">
            <ul class="data-list">
                <ul class="list-bt">
                    <li class="data-item">
                        {% include "qa/buttons/toggle_follow.html" with obj=question %}
                    </li>
                </ul>
                <ul class="list-viewers">
                    <li class="data-item"><span class="data-link link-answers"><strong>{{ question.total_answers|kmi }}</strong> {% trans "answers" %}</span></li>
                    <li class="data-item"><span class="data-link viewers"><strong>{{ question.total_views|kmi }}</strong> {% trans "views" %}</span></li>
                    <li class="data-item">{% trans "Last activity in" %} <strong>{{ question.last_activity_date|date:"b d" }}</strong></li>
                </ul>
            </ul>
        </div>
        <div class="box-options">
            <i class="shadow"></i>
            <ul class="box">
                <li><a class="bt-share" href="{% url "qa:view_question" question.slug %}">{% trans "View" %}</a></li>
                <li><a class="bt-share" href="{% url 'site:contact' %}">{% trans "Report" %}</a></li>
            </ul>
        </div>
        <a href="#" class="bt-options">{% trans "Options" %}</a>
    </div>
{% endfor %}