{% load i18n %}
{% load string_extras %}
{% load object_extras %}

{% for content in contents %}
    {% if content|get_class|lower == "blogpost" %}
        <div class="question">
            <div class="tags">
                <ul class="tags-list">
                    {% for topic in content.related_topics.all %}
                        <li class="tag"><a href="{% url "qa:view_topic" topic.slug %}" class="tag-link">{% trans topic.name %}</a></li>
                    {% endfor %}
                </ul>
            </div>
            <div class="data-question">
                <a href="{% url "qa:view_blogpost" content.slug %}">
                    <h3 class="title-question">{{ content.title }}</h3>
                    <p class="answer">
                        {{ content.body|striptags|truncate_smart:250 }}
                    </p>
                </a>
            </div>
            <div class="data">
                <ul class="data-list">
                    <ul class="list-viewers">
                        <li class="data-item"><span class="data-link link-answers"><strong>0</strong> {% trans "comments" %}</span></li>
                        <li class="data-item"><span class="data-link viewers"><strong>{{ content.total_views|kmi }}</strong> {% trans "views" %}</span></li>
                        <li class="data-item">{% trans "Last activity in" %} <strong>{{ content.last_activity_date|date:"b d" }}</strong></li>
                    </ul>
                    <ul class="list-bt">
                        <li class="data-item">
                            {% include "qa/buttons/toggle_upvote.html" with obj=content %}
                        </li>
                        <li class="data-item">
                            {% include "qa/buttons/toggle_downvote.html" with obj=content %}
                        </li>
                        <!--li class="data-item">
                            <a href="#" class="data-link">Comment</a>
                        </li-->
                    </ul>
                </ul>
            </div>
            <div class="box-options">
                <i class="shadow"></i>
                <ul class="box">
                    <li><a class="bt-share" href="{% url "qa:view_blogpost" content.slug %}">{% trans "View" %}</a></li>
                    <li><a class="bt-share" href="{% url 'site:contact' %}">{% trans "Report" %}</a></li>
                </ul>
            </div>
            <a href="#" class="bt-options">{% trans "Options" %}</a>
        </div>
    {% else %}
        <div class="question">
            <div class="tags">
                <ul class="tags-list">
                    {% for topic in content.related_topics.all %}
                        <li class="tag"><a href="{% url "qa:view_topic" topic.slug %}" class="tag-link">{% trans topic.name %}</a></li>
                    {% endfor %}
                </ul>
            </div>
            <div class="data-question">
                <a href="{% url "qa:view_question" content.slug %}">
                    <h3 class="title-question">{{ content.title }}</h3>
                    <p class="answer">
                        {% with content.answers.all|first as first_answer %}
                            {% if first_answer.body %}
                                {{ first_answer.body|striptags|truncate_smart:250 }}
                            {% else %}
                                {{ content.body|striptags|truncate_smart:250 }}
                            {% endif %}
                        {% endwith %}
                    </p>
                </a>
            </div>
            <div class="data">
                <ul class="data-list">
                    <ul class="list-bt">
                        <li class="data-item">
                            {% include "qa/buttons/toggle_follow.html" with obj=content %}
                        </li>
                    </ul>
                    <ul class="list-viewers">
                        <li class="data-item"><span class="data-link link-answers"><strong>{{ content.total_answers|kmi }}</strong> {% trans "answers" %}</span></li>
                        <li class="data-item"><span class="data-link viewers"><strong>{{ content.total_views|kmi }}</strong> {% trans "viewers" %}</span></li>
                        <li class="data-item">{% trans "Last activity in" %} <strong>{{ content.last_activity_date|date:"b d" }}</strong></li>
                    </ul>
                </ul>
            </div>
            <div class="box-options">
                <i class="shadow"></i>
                <ul class="box">
                    <li><a class="bt-share" href="{% url "qa:view_question" content.slug %}">{% trans "View" %}</a></li>
                    <li><a class="bt-share" href="{% url 'site:contact' %}">{% trans "Report" %}</a></li>
                </ul>
            </div>
            <a href="#" class="bt-options">{% trans "Options" %}</a>
        </div>
    {% endif %}
{% endfor %}