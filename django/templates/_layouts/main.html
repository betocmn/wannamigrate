{% load staticfiles %}
{% load i18n %}
{% load string_extras %}
<!doctype html>
<html lang="en">

    <head>

        {% block head %}

            {% include "_layouts/meta.html" %}

            <!-- Css files -->
            <link rel="stylesheet" href="{% static "site/css/main.css"%}" />
            <link rel="stylesheet" href="{% static "site/css/extra.css"%}" />
            <link rel="stylesheet" type="text/css" href="{% static "common/msdropdown/css/dd.css"%}" />
            <link rel="stylesheet" type="text/css" href="{% static "common/msdropdown/css/flags.css"%}" />

        {% endblock head %}

    </head>


    {% block body %}
    <body class="dashboard">
    {% endblock body %}

        <div class="wrapper">

            {% block background %}{% endblock background %}

            {% block header %}
            <header>
                <h1 class="logo"><a href="{% url 'site:home' %}" title="Wanna Migrate">Wanna Migrate</a></h1>
                <a href="#" class="bt-nav">Menu</a>
                <div class="interaction">
                    <nav class="nav nav-dashboard">
                        <ul>
                            <li class="nav-item"><a class="nav-link" data-link="question" href="{% url 'qa:list_questions' %}">{% trans "Q&A" %}</a></li>
                            <li class="nav-item"><a class="nav-link" data-link="professionals" href="{% url 'marketplace:professionals' %}">{% trans "Professionals" %}</a></li>
                            <li class="nav-item"><a class="nav-link" href="{% url 'site:tools' %}">{% trans "Extra Tools" %}</a></li>
                        </ul>
                    </nav>
                    <form action="" class="search">
                        <a href="#" class="bt-back"></a>
                        <fieldset>
                            <label for="search">{% trans "Search" %}</label>
                            <input class="search-input" type="text" placeholder="{% trans "Search" %}">
                            <button class="bt-search">{% trans "Search" %}</button>
                        </fieldset>
                    </form>
                    <div class="account category">

                        {% if user.is_authenticated %}
                            <a href="#" class="my-account options">
                                {% if user.userpersonal.avatar %}
                                    <div class="thumb">
                                        <img src="{{ user.userpersonal.avatar.thumbnail.url }}" alt="photo" />
                                    </div>
                                {% endif %}
                                <span>{% trans 'My Profile' %}</span>
                            </a>
                            <div class="box-options box-account">
                                <ul class="box">
                                    <li><a class="bt-settings" href="{% url 'site:account' %}">{% trans 'Edit Profile' %}</a></li>
                                    <li><a class="bt-contracts" href="{% url 'site:contracts' %}">{% trans 'My Contracts' %}</a></li>
                                    <li><a class="bt-pricing" href="#">{% trans 'My Messages' %}</a></li>
                                    <li><a class="bt-logout" href="{% url 'site:logout' %}">{% trans 'Logout' %}</a></li>
                                </ul>
                            </div>
                        {% else %}
                            <a href="{% url 'site:login' %}" class="my-account login"><span>{% trans 'Login' %}</span></a>
                        {% endif %}
                    </div>
                </div>
            </header>
            <section id="sticky-list" class="topics">
                <ul>
                    <li>
                        <strong>A</strong>
                        <ul>
                            <li>Amostra</li>
                            <li>Ananindeua</li>
                            <li>Avião branco do céu</li>
                        </ul>
                    </li>
                    <li>
                        <strong>B</strong>
                        <ul>
                            <li>Banana</li>
                            <li>Bolacha</li>
                            <li>Buchada</li>
                        </ul>
                    </li>
                    <li>
                        <strong>C</strong>
                        <ul>
                            <li>Cachorro</li>
                            <li>Canalha</li>
                            <li>Cavalo</li>
                        </ul>
                    </li>
                    <li>
                        <strong>C</strong>
                        <ul>
                            <li>Cachorro</li>
                            <li>Canalha</li>
                            <li>Cavalo</li>
                        </ul>
                    </li>
                    <li>
                        <strong>C</strong>
                        <ul>
                            <li>Cachorro</li>
                            <li>Canalha</li>
                            <li>Cavalo</li>
                        </ul>
                    </li>
                    <li>
                        <strong>C</strong>
                        <ul>
                            <li>Cachorro</li>
                            <li>Canalha</li>
                            <li>Cavalo</li>
                        </ul>
                    </li>
                    <li>
                        <strong>C</strong>
                        <ul>
                            <li>Cachorro</li>
                            <li>Canalha</li>
                            <li>Cavalo</li>
                        </ul>
                    </li>
                </ul>
            </section>
            {% endblock header %}

            {% block situation %}
                <section class="situations">
                    <div class="situation">
                        <div class="from field">
                            <p>{% trans "I'm from" %} <i class="flag from-flag {{ request.session.situation.from_country.code.lower }}"></i> <strong class="country from-country">{{ request.session.situation.from_country }}</strong></p>
                        </div>
                        <div class="want field">
                            <p>{% trans "I wanna" %} <strong>{{ request.session.situation.goal }}</strong></p>
                            {% if request.session.situation.total_users > 0 %}
                                <span class="other-people">{% trans "And other" %} {{ request.session.situation.total_users|kmi }} {% trans "user(s)" %}</span>
                            {% endif %}
                        </div>
                        <div class="to field">
                            <p>{% trans "in" %} <i class="flag to-flag {{ request.session.situation.to_country.code.lower }}"></i><strong class="country to-country">{{ request.session.situation.to_country }}</strong></p>
                        </div>
                        <a href="#" class="bt-change-situation button-transparent">{% trans "Change Situation" %}</a>
                    </div>
                    <div class="change-situation">
                        <form action="{% url 'site:change_situation' %}" method="post" id="situation_form">
                            {% csrf_token %}
                            <fieldset>
                                <div class="from field {% if situation_form.from_country.errors %}has-error{% endif %}">
                                    <label for="">{% trans "I'm from" %}</label>
                                    {{ situation_form.from_country }}
                                </div>
                                <div class="want field {% if situation_form.goal.errors %}has-error{% endif %}">
                                    <label for="">{% trans "I wanna" %}</label>
                                    {{ situation_form.goal }}
                                </div>
                                <div class="to field {% if situation_form.to_country.errors %}has-error{% endif %}">
                                    <label for="">{% trans "in" %}</label>
                                    {{ situation_form.to_country }}
                                </div>
                            </fieldset>
                            <input type="submit" name="situation_submit" class="button bt-change" value="{% trans "Change" %}" />
                        </form>
                    </div>
                </section>
            {% endblock situation %}

            {% block content %}{% endblock content %}

            {% block footer %}
            <footer>
                <a href="#" class="logo">Wanna Migrate</a>
                <ul class="social-links">
                    <li class="facebook"><a target="_blank" href="https://www.facebook.com/wannamigrate"></a></li>
                    <li class="angel-list"><a target="_blank" href="https://angel.co/wannamigrate"></a></li>
                    <li class="twitter"><a target="_blank" href="https://www.twitter.com/wannamigrate"></a></li>
                </ul>
                <nav class="nav-footer">
                    <ul class="about">
                        <li class="conditions"><a class="nav-footer-link" href="{% url 'site:how_it_works' %}">{% trans "How It Works" %}</a></li>
                        <li class="privacy"><a class="nav-footer-link" href="{% url 'site:terms' %}">{% trans "Terms &amp; Conditions" %}</a></li>
                        <li class="contact"><a class="nav-footer-link" href="{% url 'site:privacy' %}">{% trans "Privacy Police" %}</a></li>
                        <li class="contact"><a class="nav-footer-link" href="{% url 'site:contact' %}">{% trans "Contact Us" %}</a></li>
                    </ul>
                    <ul class="explore">
                        <li class="conditions"><a class="nav-footer-link" href="{% url 'marketplace:professionals' %}">{% trans "Find a Professional" %}</a></li>
                        <li class="privacy"><a class="nav-footer-link" href="{% url 'qa:list_questions' %}">{% trans "Ask a Question" %}</a></li>
                        <li class="contact"><a class="nav-footer-link" href="{% url 'site:tools' %}">{% trans "Immigration Points Calculator" %}</a></li>
                        <li class="contact"><a class="nav-footer-link" href="{% url 'site:service_providers' %}">{% trans "Become a Service Provider" %}</a></li>
                    </ul>
                </nav>
                {% get_language_info for LANGUAGE_CODE as current_language %}
                <a href="#" class="bt-options language {{ current_language.code }}">{{ current_language.name_local }}</a>
                <div class="box-options">
                    <ul class="box">
                        {% get_language_info_list for LANGUAGES as languages %}
                        {% for language in languages %}
                                <li><a class="{{ language.code }}" href="{% url 'site:set_lang' language.code %}?next={{request.path}}">{{ language.name_local }}</a></li>
                        {% endfor %}
                    </ul>
                </div>
                <p class="copyright">© WannaMigrate {% now "Y" %} {% trans "All Rights Reserved" %}</p>
            </footer>
            {% endblock footer %}

        </div>

        {% include "_layouts/analytics.html" %}

    </body>

    {% block scripts %}

        <!-- JS Libraries -->
        <script type="text/javascript" src="{% static 'common/jquery/js/jquery.js' %}"></script>
        <script type="text/javascript" src="{% static 'common/jquery-dd/js/jquery.dd.js' %}"></script>
        <script type="text/javascript" src="{% static 'common/jquery-sticksectionheaders/js/jquery.stickysectionheaders.js' %}"></script>
        <script type="text/javascript" src="{% static 'common/jquery-autocomplete/js/jquery.autocomplete.js' %}"></script>
        <script type="text/javascript" src="{% static 'common/jquery-raty/js/jquery.raty.js' %}"></script>
        <script type="text/javascript" src="{% static 'common/jquery-touchswipe/js/jquery.touchSwipe.js' %}"></script>

        <!-- JS Custom Scripts -->
        <script type="text/javascript" src="{% static 'site/js/countries.js' %}"></script>
        <script type="text/javascript" src="{% static 'site/js/util.js' %}"></script>
        <script type="text/javascript" src="{% static 'site/js/main.js' %}"></script>

        <!-- INLINE JS -->
        <script type="text/javascript">


            $( document ).ready( function() {

                // set classes for country flags in the options
                $( "select.custom-select.country option" ).each( function(){

                    if ( $( this ).val() != "" ) {
                        $( this ).attr( "data-image", "{% static 'site/img/msdropdown/icons/blank.gif' %}" );
                        $( this ).attr( "data-imagecss", "flag " + COUNTRIES_PER_ID[$( this ).val()] );
                        $( this ).attr( "data-title", $( this ).text() );
                    }

                });

                // create custom dropdown for situatino countries
                $( "div.change-situation .custom-select" ).msDropdown();

                // JS FORM Validation
                $( "#situation_form" ).submit( function() {
                    return validate_empty_fields( this, '{{ situation_form.get_required_fields }}', 'none' );
                });

                // Search listings
                var currencies = [
                    { value: 'Afghan afghani', data: 'AFN' },
                    { value: 'Albanian lek', data: 'ALL' },
                    { value: 'Algerian dinar', data: 'DZD' },
                    { value: 'European euro', data: 'EUR' },
                    { value: 'Angolan kwanza', data: 'AOA' },
                    { value: 'East Caribbean dollar', data: 'XCD' }
                ]
                $('.search-input').autocomplete({
                    lookup: currencies,
                    showNoSuggestionNotice: true,
                    noSuggestionNotice: '{% trans "No results found." %}',

                    onSelect: function ( suggestion ) {
                        $( 'html' ).addClass( 'show-topics' );
                    }
                });
                $( '.search-input' ).keyup(function(){
                    if ( !$( this ).val() ) {
                        $( 'html' ).removeClass('fixed');
                    }else{
                        $( 'html' ).addClass('fixed');
                    }
                });
                $( '#sticky-list' ).stickySectionHeaders({
                  stickyClass     : 'sticky',
                  headlineSelector: 'strong'
                });

            })

        </script>

    {% endblock scripts %}

</html>